# Калькулятор бонусных уроков (Managers)

Короткая памятка по проекту для владельца.

## Назначение
Одностраничный инструмент для формирования цен и сообщений по пакетам уроков с учётом языка, валюты и уровня скидок. Позволяет:
- переключать валюту и язык;
- выбирать тип тарифа (базовые, рекуррентные);
- указывать бонусные уроки для пакетов;
- копировать ссылки на покупку и готовый текст сообщения;
- работать с рекуррентными платежами (подписками).

## Файлы
- `index.html` — разметка страницы.
- `styles.css` — стили интерфейса.
- `lessonPackagesConfig.js` — конфиг пакетов по валютам/языкам/уровням.
- `common.js` — логика UI: заполнение таблицы, расчёты, генерация сообщения, копирование.

## Замечания по данным
- Минимальные цены для подсветки задаются в `common.js` в объекте `minCosts`.
- Склонения слов вынесены в функции `getLessonWord`, `getBonusWord`, `getCurrencyWord`, `getMonthWord`.
- Форматирование сумм — `formatCurrency` (поддерживает `0`).

## Обновление пакетов
1. Откройте `lessonPackagesConfig.js`.
2. Найдите нужный раздел по валюте → языку → типу тарифа (`base` или `recurring`).
3. Обновите `cost`, `link`, `bonusLessons`, `selected`.
4. Для рекуррентных тарифов добавьте `isRecurring: true` и `description`.
5. Сохраните файл и перезагрузите страницу.

## Рекуррентные тарифы
Добавлена поддержка рекуррентных платежей в разделе `recurring`:
- Все тарифы в этом разделе являются подписками с автоматическим списанием каждые 30 дней
- Ключи пакетов могут быть строками (например, "4-auto" для автоплатежа)
- В сообщении добавляется информация "(подписка каждые 30 дней)"

### Как работают рекуррентные платежи
**Что это такое:**
- Автоматическая подписка на пакет уроков
- Деньги списываются каждые 30 дней с привязанной карты
- Уроки зачисляются на счет ученика автоматически

**Преимущества:**
- Не нужно каждый раз покупать уроки вручную
- Непрерывность обучения - уроки всегда есть на счету
- Удобство для родителей - не нужно следить за балансом

**Как отменить подписку:**
1. Войти в личный кабинет на сайте ProgKids
2. Перейти в раздел "Подписки" или "Платежи"
3. Найти активную подписку и нажать "Отменить"
4. Подтвердить отмену подписки

**Важно знать:**
- Отмена подписки не влияет на уже оплаченные уроки
- Подписку можно отменить в любое время
- После отмены автоматические списания прекращаются
- Можно возобновить подписку позже, оформив новую

## Известные правила/решения
- `lessonPackages` объявлена явно, чтобы избежать неявной глобальной переменной.
- Копирование текста использует `navigator.clipboard.writeText` с фолбэком.
- Убраны дубли функций и инлайн-скрипт из `index.html`.


